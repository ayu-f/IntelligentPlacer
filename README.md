# Лабораторная работа Intelligent placer

# Постановка задачи
Дан набор фотографий предметов. Также даны фотографии многоугольника, нарисованного на белом листе с предметами из данного набора.
Необходимо определить, поместятся ли предметы в многоугольник, не перекрывая друг друга.

## Формат входных/выходных данных
Программа на вход получает изображение формата .jpg, на котором расположен нарисованный многоугольник и предметы, 
которые необходимо проверить(по одну сторону от многоугольника)

## Требования к многоугольнику
* Многоугольник должен быть изображен на белом листе бумаги без лишних рисунков
* Многоугольник должен быть нарисованн черным маркером или черной ручкой
* Линии мноугольника должны быть четко прямыми, углы ярко выражены
* Многоугольник должен быть замкнут
* Многоугольник должен быть выпуклым
* Многоугольник расположен по одну сторону от всех предметов
* Не больше 5 вершин
* Белый лист, на котором нарисован многоугольник, должен полностью помещаться на фотографии

## Требования к предметам
* Рассматриваются предметы из заранее предложенного набора, в котором они располагаются на белом листе
* Предметы не перекрывают друг друга на фотографии
* Тени от предметов не должны быть сильной интенсивности
* Поверхность, на которой изображены предметы и многоугольник, должна быть хорошо освещена, предметы хорошо различимы на ней
* Предметы не пересекаются с многоугольником
* Без ярких бликов

## Требования к изображениям
* Изображения цветные, формата .jpg
* Угол между камерой и перпендикуляром к поверхности должен быть прямой или почти прямой (до 10 градусов)

# План работы
## Поиск границы предметов из набора данных
1. Бинаризация изображения (напр. бинаризация Оцу skimage.filters.threshold_otsu)
2. С помощью морфологических операций сгладить маску (используя skimage.morphology)
3. Применить маску к изображению
4. Обрезать изображение по границам маски

## Поиск границы многоугольника
1. Сгладить изображение фильтром гаусса (используя skimage.filters.gaussian)
2. Найти границы с помощью детектора Canny (используя skimage.feature.canny)
3. Найти маску изображения, используя морфологические операции
4. Разрезать изображение вертикальной линией в соотношении 1:2 (предметы окажутся слева, многоугольник справа)
5. В полученных двух частях изображения ищем:
   1. В первой части - предметы
   2. Во второй части - многоугольник
6. Находим свойства предметов и многоугольника

## Размещение предметов в многоугольник
1. Найдем площади предметов и многоугольника
2. Найдем сумму площадей предметов и сравним с площадью многоугольника. Если сумма превышает - возвращаем сразу False
3. Отсортируем площади предметов по невозрастанию
4. Выбираем начальную координату многоугольника - вершину, у которй самая минимальная координата по x и y
5. Начиная с самой большой площади, будем пытаться размещать предмет в многоугольник, проходя по всем x и y многоугольника
и поворачивая предметы от 0 до 360 градусов с некоторым шагом (Пытаемся разместить объект ровно в угл многоугольника). 
   1. Если предмет удалось разместить - переходим к следующему предмету
   2. Если предмет разместить не удалось - меняем начальную координату и переходим к п.5
6. Если после всех переборов вершин не удалось разместить предметы - возвращаем False. Иначе в п.5 удалось разместить предметы - возвращаем True

# Используемые предметы
[Ссылка на предметы](images/objects)

# Датасет
[Ссылка на датасет](images/dataset).
---
Фисюк Алексей, группа 5030102/90201